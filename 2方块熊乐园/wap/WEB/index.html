<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>index</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <meta http-equiv="x-dns-prefetch-control" content="on" />
    <meta name="format-detection"content="telephone=no"/>
    <meta name="format-detection" content="email=no"/>
    <link class="favicon" href="" rel="shortcut icon" type="image/x-icon"/>
    <link rel="stylesheet" href="css/bootstraptc.min.css">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/ppublic.min.css">
    <link rel="stylesheet" href="css/headerBox.css">
    <link rel="stylesheet" href="css/bottomBox.css">
    <style type="text/css">
        body{
            overflow: auto;
            background-color: #E9E9E9;
        }

        /*searchBox*/
        .searchBox .search{
            width:1200px;
            height:100px;
            line-height:100px;
            margin:0 auto;
            font-size: 14px;
            color: #666;
            background-color: #fff;
        }
        .searchBox .search .searchLeft .logo{
            cursor: pointer;
            padding-left:16px;
            width: 325px;
            height: 51px;
        }
        .searchBox .search .searchLeft .change{
            text-decoration: underline;
        }
        .searchBox .search .searchRight{
            text-align: right;
        }
        .searchBox .search .searchRight .ipt{
            width: 310px;
            height: 35px;
            line-height:35px;
            font-size: 13px;
            outline: none;
            text-indent: 10px;
            letter-spacing: 0;
            border: 1px solid #FF4720;
        }
        .searchBox .search .searchRight .searchImg{
            cursor: pointer;
            width:70px;
            margin-left:-6px;
        }
        .searchBox .search .searchRight .searchBtn{
            width: 127px;
            height: 35px;
            line-height:35px;
            color: #fff;
            font-size: 13px;
            border: none;
            outline: none;
            background-color: #FF4720;
            margin-right:42px;
            position: relative;
            top:1px;
        }

        /*tabsBox*/
        .tabsBox{
            min-width: 1200px;
            background-color: #F2F2F2;
        }
        .tabsBox .tabs{
            width:1200px;
            margin:0 auto;
            border-bottom: 2px solid #FF4720;
        }
        .tabsBox .tabs .tabsLeft{
            font-size: 0;
        }
        .tabsBox .tabs .tabsLeft .tabLink{
            display: inline-block;
            width: 103px;
            height: 35px;
            line-height: 35px;
            margin-top: 10px;
            text-align: center;
            font-size: 13px;
            color: #333;
        }
        .tabsBox .tabs .tabsLeft .active{
            background-color: #FF4720;
            color: #fff;
        }
        .tabsBox .tabs .tabsRight{
            text-align: right;
        }
        .tabsBox .tabs .tabsRight .tabBtn{
            width: 127px;
            height: 35px;
            line-height:35px;
            color: #fff;
            font-size: 13px;
            border: none;
            outline: none;
            background-color: #6699FF;
            margin-right:16px;
            margin-top:5px;
        }

        /*bannerBox*/
        .bannerBox .banner{
            width:1200px;
            margin:0 auto;
            background-color: #fff;
            padding:10px;
        }
        .bannerBox .banner .bannerLeft{
            /*width: 325px;*/
            width: 274px;
            height: 273px;
            border: 1px solid #E3E3E3;
        }
        .bannerBox .banner .bannerLeft .listUl{
            padding:0 10px;
            height:100%;
        }
        .bannerBox .banner .bannerLeft .listUl .listLi{
            height:16.666%;
            line-height:45px;
            font-size: 13px;
            border-bottom: 1px solid #F0F0F0;
        }
        /*.bannerBox .banner .bannerLeft .listUl .listLi:last-child{
            border: none;
        }*/
        .bannerBox .banner .bannerLeft .listUl .listLi .listImg{
            width: 24px;
            vertical-align: -6px;
        }
        .bannerBox .banner .bannerLeft .listUl .listLi .sortLink{
            font-weight: bold;
            color: #353535;
            padding: 0 6px;
        }
        .bannerBox .banner .bannerLeft .listUl .listLi .sortLink:hover{
            text-decoration: underline;
        }
        .bannerBox .banner .bannerLeft .listUl .listLi .detailLink{
            color: #999;
            padding-right: 3px;
        }
        .bannerBox .banner .bannerLeft .listUl .listLi .detailLink .detailLinkText:hover{
            text-decoration: underline;
        }
        .bannerBox .banner .bannerLeft .listUl .listLi .detailLink:after{
            content: " |";
        }
        .bannerBox .banner .bannerLeft .listUl .listLi .detailLink:nth-last-child(1):after{
            content: "";
        }

        .bannerBox .banner .bannerMiddle{
            width:640px;
            margin:0 22px;
        }
        .bannerBox .banner .bannerMiddle .bannerImg{
            width: 640px;
            height: 270px;
        }
        .bannerBox .banner .bannerRight{
            /*width: 166px;*/
            width: 220px;
        }
        .bannerBox .banner .bannerRight .bannerRightTitle{
            height: 22px;
            position: relative;
            margin-bottom:10px;
            border-bottom:1px solid #333;
        }
        .bannerBox .banner .bannerRight .bannerRightTitle span{
            position: absolute;
            left: 0;
            top: 1px;
            font-size: 18px;
            font-weight: bold;
            border-bottom: 2px solid #FF4720;
        }
        .bannerBox .banner .bannerRight .bannerRightBox{
            cursor: pointer;
            position: relative;
            /*width: 236px;*/
            width: 100%;
            height: 236px;
            animation-name: donghua;
            animation-duration: 4s;
            animation-timing-function: ease;
            animation-iteration-count: infinite;
            animation-direction: alternate;
        }
        /*@keyframes donghua {
            0%{
                background: url("image/index/bannerRight1.png")no-repeat ;
                background-size: 100% 100%;
            }

            100%{
                background: url("image/index/bannerRight2.png")no-repeat ;
                background-size: 100% 100%;
            }
        }*/
        .bannerBox .banner .bannerRight .bannerRightBox .desc{
            position: absolute;
            width:100%;
            left:0;
            bottom:0;
            padding:0 6px;
            height: 30px;
            line-height: 30px;
            font-size: 16px;
            color: #fff;
            background-color: RGBA(255, 71, 32, 0.8);
        }
        .bannerBox .banner .bannerRight .bannerRightBox .desc .left{
            font-weight: bold;
        }
        .bannerBox .banner .bannerRight .bannerRightBox .desc .right{
            text-align: right;
        }

        /*refreshBox*/
        .refreshBox{
            background-color: #F2F2F2;
            padding-top:10px;
        }
        .refreshBox .refresh{
            width:1200px;
            margin:0 auto;
            padding:8px 0;
        }
        .refreshBox .refresh .refreshLeft .refreshName{
            font-weight:bold;
            font-size: 18px;
            color: #333;
            border-left:2px solid #FF4720;
            padding-left:8px;
        }
        .refreshBox .refresh .refreshRight{
            padding-right:30px;
            text-align: right;
        }
        .refreshBox .refresh .refreshRight .refreshImg{
            width:20px;
            vertical-align: -4px;
        }
        .refreshBox .refresh .refreshRight .refreshBtn{
            color: #999;
            font-size: 16px;
            text-decoration: underline;
        }

        /*refreshImgBox*/
        .refreshImgBox{
            /*background-color: #F2F2F2;*/
        }
        .refreshImgBox .refreshImg{
            width:1200px;
            margin:0 auto;
            overflow: hidden;
            height: 210px;
        }
        .refreshImgBox .refreshImg .refreshLi{
            display: none;
            cursor: pointer;
            float: left;
            position: relative;
            width: 240px;
            height: 200px;
            text-align: center;
            margin-bottom: 10px;
        }
        .refreshImgBox .refreshImg .refreshLi .goodImg{
            width:200px;
            height:200px;
            border: 1px solid #FF4720;
        }
        .refreshImgBox .refreshImg .refreshLi .desc{
            display: none;
            position: absolute;
            width:200px;
            left:0;
            bottom:0;
            padding:0 6px;
            height: 30px;
            line-height: 30px;
            font-size: 16px;
            color: #fff;
            margin-left:20px;
            background-color: #FF4720;
        }
        .refreshImgBox .refreshImg .refreshLi .desc .left{
            font-weight: bold;
        }
        .refreshImgBox .refreshImg .refreshLi .desc .right{
            text-align: right;
        }

        /*nearbyBox*/
        .nearbyBox{
            /*background-color: #F2F2F2;*/
            /*padding-top:10px;*/
        }
        .nearbyBox .nearby{
            width:1200px;
            margin:0 auto;
            padding:8px 0;
        }
        .nearbyBox .nearby .nearbyLeft .nearbyName{
            font-weight:bold;
            font-size: 18px;
            color: #333;
            border-left:2px solid #FF4720;
            padding-left:8px;
        }
        .nearbyBox .nearby .nearbyRight{
            padding-right:30px;
            text-align: right;
        }
        .nearbyBox .nearby .nearbyRight .nearbyImg{
            width:20px;
            vertical-align: -4px;
        }
        .nearbyBox .nearby .nearbyRight .nearbyBtn{
            color: #999;
            font-size: 16px;
            text-decoration: underline;
        }

        /*nearbyImgBox*/
        .nearbyImgBox{
            margin-bottom: 20px;
            /*background-color: #F2F2F2;*/
        }
        .nearbyImgBox .more{
            margin: 0 auto;
            width:1200px;
            text-align: right;
        }
        .nearbyImgBox .more .moreText{
            font-size: 16px;
            color: #333;
            padding-right: 24px;
            text-decoration: underline;
        }
        .nearbyImgBox .nearbyImg{
            width:1200px;
            margin:0 auto;
            overflow: hidden;
        }
        .nearbyImgBox .nearbyImg .nearbyLi{
            cursor: pointer;
            float: left;
            position: relative;
            width: 240px;
            height: 200px;
            text-align: center;
            margin-bottom: 10px;
        }
        .nearbyImgBox .nearbyImg .nearbyLi .goodImg{
            width:200px;
            height:200px;
            border: 1px solid #FF4720;
        }
        .nearbyImgBox .nearbyImg .nearbyLi .desc{
            display: none;
            position: absolute;
            width:200px;
            left:0;
            bottom:0;
            padding:0 6px;
            height: 30px;
            line-height: 30px;
            font-size: 16px;
            color: #fff;
            margin-left:20px;
            background-color: #FF4720;
        }
        .nearbyImgBox .nearbyImg .nearbyLi .desc .left{
            font-weight: bold;
        }
        .nearbyImgBox .nearbyImg .nearbyLi .desc .right{
            text-align: right;
        }

        #footerIframe{
            min-width: 1200px;
            width: 100%;
            margin-bottom: -5px;
            background-color: #F2F2F2;
        }
    </style>
</head>
<body>
<section class="commonPopBox" style="display: none;">
    <div class="commonPop">
        <h3 class="title"></h3>
        <p class="detailTip"></p>
        <div class="confirmBox">
            <span class="confirmBtn">OK</span>
        </div>
    </div>
</section>
<section class="container-fluid">

    <aside class="headerBox">
        <div class="row header">
            <div class="col-xs-6 col-sm-6 headerLeft">
                <span class="lusaka"><!--Lusaka--></span>&nbsp;
                <span class="change">[Change]</span>
            </div>
            <div class="col-xs-6 col-sm-6 headerRight headerRight1" style="display: none;">
                <span class="space home">Home</span>|
                <span class="space login">Login</span>|
                <span class="space register">Register</span>|
                <a href="help.html" class="space help" target="_blank">Help</a>
            </div>
            <div class="col-xs-6 col-sm-6 headerRight headerRight2" style="display: none;">
                <span class="space home">Home</span>|
                <span class="headImgBox"><img src="" class="headImg" style="display: none;"><span class="space name"></span>|</span>
                <span class="space profile">My profile</span>|
                <span class="space logout">logout</span>|
                <a href="help.html" class="space help" target="_blank">Help</a>
            </div>
            <ul class="changeUl" style="display: none;">
                <!--<li class="changeLi"><a href="#" class="changeLiLink">Lusaka1</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka2</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka3</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka4</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka5</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka6</a></li>-->
            </ul>
        </div>
    </aside>

    <aside class="searchBox">
        <div class="row search">
            <div class="col-xs-6 col-sm-6 searchLeft">
                <img class="logo" src="image/index/logo.png">
            </div>
            <div class="col-xs-6 col-sm-6 searchRight">
                <input class="ipt" type="text" placeholder="What dou you need?">
                <img class="searchImg" src="image/index/search.png">
                <button class="searchBtn">PUBLISH</button>
            </div>
        </div>
    </aside>

    <aside class="tabsBox">
        <div class="row tabs">
            <div class="col-xs-8 col-sm-8 tabsLeft">
                <a href="#" class="tabLink active">HOME</a>
                <!--<a href="#" class="tabLink">VEHICLES</a>
                <a href="#" class="tabLink">DIGTALS</a>
                <a href="#" class="tabLink">LIFE GOODS</a>-->
            </div>
            <!--<div class="col-xs-4 col-sm-4 tabsRight">
                <button class="tabBtn">FIND JOBS</button>
            </div>-->
        </div>
    </aside>

    <aside class="bannerBox">
        <div class="row banner">
            <ul class="col-xs-3 col-sm-3 bannerLeft">
                <ul class="listUl">
                    <!--<li class="listLi">
                        <img class="listImg" src="image/index/bannerLeft1.png">
                        <a href="#" class="sortLink">影视家电</a>
                        <a href="#" class="detailLink">大家电</a><a href="#" class="detailLink">小家电</a><a href="#" class="detailLink">料理机</a>
                    </li>
                    <li class="listLi">
                        <img class="listImg" src="image/index/bannerLeft1.png">
                        <a href="#" class="sortLink">影视家电</a>
                        <a href="#" class="detailLink">大家电</a><a href="#" class="detailLink">小家电</a><a href="#" class="detailLink">料理机</a>
                    </li>
                    <li class="listLi">
                        <img class="listImg" src="image/index/bannerLeft1.png">
                        <a href="#" class="sortLink">影视家电</a>
                        <a href="#" class="detailLink">大家电</a><a href="#" class="detailLink">小家电</a><a href="#" class="detailLink">料理机</a>
                    </li>
                    <li class="listLi">
                        <img class="listImg" src="image/index/bannerLeft1.png">
                        <a href="#" class="sortLink">影视家电</a>
                        <a href="#" class="detailLink">大家电</a><a href="#" class="detailLink">小家电</a><a href="#" class="detailLink">料理机</a>
                    </li>
                    <li class="listLi">
                        <img class="listImg" src="image/index/bannerLeft1.png">
                        <a href="#" class="sortLink">影视家电</a>
                        <a href="#" class="detailLink">大家电</a><a href="#" class="detailLink">小家电</a><a href="#" class="detailLink">料理机</a>
                    </li>
                    <li class="listLi">
                        <img class="listImg" src="image/index/bannerLeft1.png">
                        <a href="#" class="sortLink">影视家电</a>
                        <a href="#" class="detailLink">大家电</a><a href="#" class="detailLink">小家电</a><a href="#" class="detailLink">料理机</a>
                    </li>-->
                </ul>
                <!--<a href="#"><img class="listsImg" src="image/index/lists.png"></a>-->
            </ul>
            <div class="col-xs-6 col-sm-6 bannerMiddle swiper-container">
                <div class="swiper-wrapper">

                </div>
            </div>
            <div class="col-xs-3 col-sm-3 bannerRight">
                <h3 class="bannerRightTitle">
                    <span>SELLING</span>
                </h3>
                <div id="bannerRightBox" class="bannerRightBox" style="display: block;">
                    <!--<img class="bannerRightBoxImg" src="image/index/bannerRight1.png">-->
                    <div class="desc row">
                        <div class="col-xs-6 col-sm-6 left"></div>
                        <div class="col-xs-6 col-sm-6 right"></div>
                    </div>
                </div>
            </div>
        </div>
    </aside>

    <!--<aside class="refreshBox">
        <div class="row refresh">
            <div class="col-xs-6 col-sm-6 refreshLeft">
                <span class="refreshName">SOMETHING YOU MAY LIKE</span>
            </div>
            <div class="col-xs-6 col-sm-6 refreshRight">
                <img class="refreshImg" src="image/index/refresh.png">
                <a href="#" class="refreshBtn">REFRESH</a>
            </div>
        </div>
    </aside>

    <aside class="refreshImgBox">
        <ul class="refreshImg">
            <li class="refreshLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>
            <li class="refreshLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>
            <li class="refreshLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>
            <li class="refreshLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>
            <li class="refreshLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>
        </ul>
    </aside>-->

    <aside class="nearbyBox">
        <div class="row nearby">
            <div class="col-xs-6 col-sm-6 nearbyLeft">
                <span class="nearbyName">SOMETHING NEARBY</span>
            </div>
            <!--<div class="col-xs-6 col-sm-6 refreshRight">
                <img class="refreshImg" src="image/index/refresh.png">
                <a href="#" class="refreshBtn">REFRESH</a>
            </div>-->
        </div>
    </aside>

    <aside class="nearbyImgBox">
        <ul class="nearbyImg">
            <!--<li class="nearbyLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>
            <li class="nearbyLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>
            <li class="nearbyLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>
            <li class="nearbyLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>
            <li class="nearbyLi">
                <img class="goodImg" src="image/index/good1.jpg">
                <div class="desc row">
                    <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                    <div class="col-xs-6 col-sm-6 right">1054</div>
                </div>
            </li>-->
        </ul>
        <!--<p class="more"><a href="###" class="moreText">MORE</a></p>-->
    </aside>

    <!--<aside class="bottomBox">
        <div class="row bottom">
            <div class="col-xs-12 col-sm-12 bottomLink">
                <a href="#">Contact Us</a>|<a href="#">Privacy Notice</a>|<a href="#">Conditions of Use</a>
            </div>
            <div class="col-xs-12 col-sm-12 bottomCopyRight">
                <div class="bottomCopyRightText">

                    <span class="copy">Copyright © 2017 <a href="###" class="copyLink">kalichimall.com</a> All Right Reserved</span>
                    &lt;!&ndash;&emsp;<a href="#" class="contact">Contact Us</a>&ndash;&gt;
                </div>
            </div>
        </div>
    </aside>-->
    <iframe id="footerIframe" src="footer.html" frameborder="0"></iframe>
</section>
<script type="text/javascript" src="js/jquery-3.0.0.min.js"></script>
<script type="text/javascript" src="js/swiper.min.js"></script>
<script type="text/javascript" src="js/public.js"></script>
<script type="text/javascript" src="js/headerBox.js"></script>
<script type="text/javascript" src="js/searchBoxRight.js"></script>
<script type="text/javascript">
    $(function(){
        console.log("最新代码");

        ////getbestgoods
        $.ajax({
            type: "get",
            url: baseUrl+"/apigateway/getbestgoods",
            success:function(data){
                if(data.status == 200){
                    data = JSON.parse(data.data);
                    console.log("getbestgoods",data);
                    var num = 0;
                    $('.bannerBox .banner .bannerRight .bannerRightBox .desc .left').html(data[0].cname);
                    $('.bannerBox .banner .bannerRight .bannerRightBox .desc .right').html(data[0].price);

                    var tt = document.styleSheets[0];
                    tt.deleteRule(6);//清除之前写入的动画样式
                    console.log(tt);
                    tt.insertRule("@keyframes donghua{" +
                            "0%{background:url("+baseUrl+data[0].cimg+")no-repeat;background-size: 100% 100%} " +
                            "100%{background:url("+baseUrl+data[1].cimg+")no-repeat;background-size: 100% 100%}}",6);//写入样式

                    $('#bannerRightBox').unbind('click').click(function(){
                        localStorage.setItem('goodIdFromCategory',data[0].id);
                        window.location.href = "detail.html?id="+data[0].id;
                    });
                    setInterval(function () {
                        if(num == 0){
                            num = 1;
                        }else{
                            num = 0
                        }
                        $('.bannerBox .banner .bannerRight .bannerRightBox .desc .left').html(data[num].cname);
                        $('.bannerBox .banner .bannerRight .bannerRightBox .desc .right').html(data[num].price);
                        $('#bannerRightBox').unbind('click').click(function(){
                            localStorage.setItem('goodIdFromCategory',data[num].id);
                            window.location.href = "detail.html?id="+data[num].id;
                        });
                    }, 4000);
                    $('.bannerBox .banner .bannerRight .bannerRightBox').click(function () {
                        console.log(data[num].id);
                    });
                }
            },
            error:function(error){
                console.log(error);
            }
        });



        //点击图片logo跳转到index页面；
        $('.searchBox .search .searchLeft .logo').click(function () {
            window.location.href = 'index.html' + window.location.search;
        });

        //refreshBox显示效果
        $('.refreshImgBox .refreshImg .refreshLi').fadeIn(1000).show();
//        $('.refreshImgBox .refreshImg .refreshLi').slideDown(1000).show();




        /*/!*refreshImgBox，nearbyImgBox：hover图片动效*!/
        $('.refreshImgBox .refreshImg .refreshLi .goodImg, .nearbyImgBox .nearbyImg .nearbyLi .goodImg').hover(
                function(){
                    $(this).siblings('.desc').fadeIn();
                },
                function(){
                    $(this).siblings('.desc').fadeOut();
                }
        );*/

        var bannerNeedCid = [];//banner的两张图片需要cid
        var bannerNeedCidName = [];//banner的两张图片需要cidName
        //获得产品分类
        $.ajax({
            type: "get",
            url: baseUrl+"/apigateway/categorys",
            dataType:"json",
            success: function(data){
                if(data.status == 200){
                    data = JSON.parse(data.data);
                    console.log("获得产品分类",data);
                    

                    var totalStr = "";
                    var cidNameArr = [];
                    var cidArr = [];
                    for (var sort in data) {
                        //tab切换
                        $('.tabsBox .tabs .tabsLeft').append('<a href="#" class="tabLink">'+data[sort].name+'</a>');

                        cidNameArr.push(data[sort].name);
                        cidArr.push(data[sort].cid);



                        //二级菜单
                        var str = "";
                        var listStr = '<li class="listLi"></li>';
//                        console.log(data[sort].name);
                        str += ('<img class="listImg" src='+data[sort].imgsrc+'><a href="#" class="sortLink">'+data[sort].name+'</a>');
                        var details = data[sort].sub;
//                            console.log(details);
                        for (var detail in details){
//                            console.log(details[detail].name);
                            str += ('<a href="#" class="detailLink"><span class="detailLinkText">'+details[detail].name+'</span></a>');
                        }
//                        console.log('str='+str);
                        listStr = '<li class="listLi">'+str+'</li>';
                        $('.bannerBox .banner .bannerLeft .listUl').append(listStr);

                    }

                    console.log(cidNameArr);
                    console.log(cidArr);
                    bannerNeedCid = cidArr;
                    bannerNeedCidName = cidNameArr;
                    //tabsBox：tab切换
                    localStorage.removeItem("cidName");//分类的名称
                    localStorage.removeItem("cid");//分类的cid
                    localStorage.removeItem("searchOrTab");//点击进入到category的来源
                    $('.tabsBox .tabs .tabsLeft .tabLink').click(function () {
                        var index = $(this).index();
                        $('.tabsBox .tabs .tabsLeft .tabLink').removeClass("active");
                        $(this).addClass("active");
                        if(index != 0){
                            var cidName = cidNameArr[index-1];
                            var cid = cidArr[index-1];
                            console.log(cidName);
                            console.log(cid);
                            localStorage.setItem('searchOrTab',"tab");
                            localStorage.setItem('cidName',cidName);
                            localStorage.setItem('cid',cid);
                            window.location.href = "category.html?searchOrTab=tab&cid="+cid;
                        }
                    });

                    //点击一级菜单
                    $('.bannerBox .banner .bannerLeft .listUl .listLi').each(function(index){
                        var firstIndex = index;
                        $(this).delegate('.sortLink','click',function(){
                            var cidName = cidNameArr[index];
                            var cid = cidArr[index];
//                            alert(cidName);
//                            alert(cid);
                            localStorage.setItem('searchOrTab',"tab");
                            localStorage.setItem('cidName',cidName);
                            localStorage.setItem('cid',cid);
                            window.location.href = "category.html?searchOrTab=tab&cid="+cid;
                        });
                        $(this).children('.detailLink').click(function(){
//                            alert(firstIndex);
                            var secondIndex = $(this).index()-2;
//                            alert(secondIndex);
                            var cidSub = data[firstIndex].sub;
                            var cidName = cidSub[secondIndex].name;
                            var cid = cidSub[secondIndex].cid;
//                            alert(cidName);
//                            alert(cid);
                            localStorage.setItem('searchOrTab',"tab");
                            localStorage.setItem('cidName',cidName);
                            localStorage.setItem('cid',cid);
                            window.location.href = "category.html?searchOrTab=tab&cid="+cid;
                        });
                    });



                }else{
                    commonPopFun(data.msg);
                }
            },
            error:function(error){
                console.log(error);
            }
        });










        //获得评论信息(支持盖楼)
        var getcommentInfo = {
            "token":token,			//登录凭证，当action="user" 时必须指定
            "goodid":"1",		//商品ID, 当action="good" 时必须指定
            "action":"good",	//good 或者 user,指定为good时获得该商品的评论信息，指定为user时获得该用户的评论信息
            "start":"1",			//从第几条开始
            "num":"10"			//获得几条,最多20条
        };
        $.ajax({
            type:"POST",
            url:baseUrl + "/apigateway/getcomment",
            dataType:"json",
            data:JSON.stringify(getcommentInfo),
            success:function(data){
                //console.log(data);
                if(data.status == 200){
                    data = JSON.parse(data.data);
                    console.log("获得评论信息(支持盖楼)",data);
                }else if(data.status == 501){//token失效
                    commonPopFun(data.msg);
                }else{
                    commonPopFun(data.msg);
                }
            },
            error:function(error){
                console.log(error);
            }
        });


        
        
        //获取图片
        var src = baseUrl+"/gimg/A8D5883AE4946D2C3AEA7E02B77CED30";
        console.log(src);

        //获得banner
        $.ajax({
            type: "get",
            url: baseUrl+"/apigateway/getbanner?gname=index-top-middle",
            dataType:"json",
            success: function (data) {
                if(data.status == 200){
                    data = JSON.parse(data.data);
                    console.log('获得banner',data);
                    /*
                    * <div class="swiper-wrapper">
                     <div class="col-xs-12 col-sm-12 swiper-slide"><a href="javascript:void(0);"><img class="bannerImg" src="image/index/banner1.png"></a></div>
                     <div class="col-xs-12 col-sm-12 swiper-slide"><a href="javascript:void(0);"><img class="bannerImg" src="image/index/banner2.png"></a></div>
                     </div>
                    * */
                    var str = '';
                    for(var i=0; i<data.length; i++){
                        str += '<div class="col-xs-12 col-sm-12 swiper-slide"><a href='+data[i].target+'><img class="bannerImg" src='+data[i].imgsrc+' alt='+data[i].name+'></a></div>';
                    }
                    console.log(str);
                    $('.swiper-wrapper').append(str);

                    //bannerBox：轮播图
                    var mySwiper = new Swiper ('.swiper-container', {
                        direction: 'horizontal',//水平滑动
                        loop: true, //循环播放
                        autoplay: 2000, //自动播放
                        autoplayDisableOnInteraction: false, //用户操作swiper之后，是否禁止autoplay。默认为true：停止。
                        pagination: '.swiper-pagination',  // 分页器
                        speed: 2000
                    });

                    $('.swiper-slide').click(function(){
                        var index = $(this).index();
                        if(index%2 == 0){
                            localStorage.setItem('searchOrTab',"tab");
                            localStorage.setItem('cidName',bannerNeedCidName[0]);
                            localStorage.setItem('cid',bannerNeedCid[0]);
                            window.location.href = "category.html?searchOrTab=tab&cid="+bannerNeedCid[0];
                        }else if(index%2 == 1){
                            localStorage.setItem('searchOrTab',"tab");
                            localStorage.setItem('cidName',bannerNeedCidName[3]);
                            localStorage.setItem('cid',bannerNeedCid[3]);
                            window.location.href = "category.html?searchOrTab=tab&cid="+bannerNeedCid[3];
                        }
                    });

                }else{
                    commonPopFun(data.msg);
                }
            },
            error: function (error) {
                console.log(error);
            }
        });


    });

</script>
</body>
</html>