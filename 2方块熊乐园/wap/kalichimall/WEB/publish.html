<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>publish</title>
    <meta name="keywords" content="kalichi,mall, kalichimall,vehicle,sedan,suv,digtal,cellphone,computer,watch,bulding,family,house,office,life goods,clothes,shoes,furniture,sell,buy,second,free">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <meta http-equiv="x-dns-prefetch-control" content="on" />
    <meta name="format-detection"content="telephone=no"/>
    <meta name="format-detection" content="email=no"/>
    <link class="favicon" href="" rel="shortcut icon" type="image/x-icon"/>
    <link class="favicon" href="" rel="shortcut icon" type="image/x-icon"/>
    <link rel="stylesheet" href="css/bootstraptc.min.css">
    <link rel="stylesheet" href="css/ppublic.min.css">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/headerBox.css">
    <style type="text/css">
        body{
            overflow: auto;
            /*background-color: #E9E9E9;*/
        }

        /*searchBox*/
        .searchBox .search{
            width:1200px;
            height:100px;
            line-height:100px;
            margin:0 auto;
            font-size: 14px;
            color: #666;
            background-color: #fff;
        }
        .searchBox .search .searchLeft .logo{
            cursor: pointer;
            padding-left:16px;
            width: 325px;
            height: 51px;
        }
        .searchBox .search .searchLeft .change{
            text-decoration: underline;
        }
        .searchBox .search .searchRight{
            text-align: right;
        }
        .searchBox .search .searchRight .ipt{
            width: 310px;
            height: 35px;
            line-height:35px;
            font-size: 13px;
            outline: none;
            text-indent: 10px;
            letter-spacing: 0;
            border: 1px solid #FF4720;
        }
        .searchBox .search .searchRight .searchImg{
            cursor: pointer;
            width:70px;
            margin-left:-6px;
        }
        .searchBox .search .searchRight .searchBtn{
            width: 127px;
            height: 35px;
            line-height:35px;
            color: #fff;
            font-size: 13px;
            border: none;
            outline: none;
            background-color: #FF4720;
            margin-right:42px;
            position: relative;
            top:1px;
        }

        /*sortBox*/
        .sortBox{

        }
        .sortBox .sort{
            width:1200px;
            margin:0 auto;
            padding: 50px 90px 0 90px;
        }
        .sortBox .sort .part{
            width: 300px;
            height: 30px;
            line-height:30px;
            color: #333333;
            font-size: 14px;
            border-bottom: 2px solid #999999;
        }
        .sortBox .sort .space{
            margin-right: 60px;
        }
        .sortBox .sort .active{
            border-bottom: 2px solid #FF4720;
        }
        .sortBox .sort .space .left{
            display: inline-block;
            width: 50%;
        }
        .sortBox .sort .space .left .categoryName{
            font-family: Arial,sans-serif;
        }
        .sortBox .sort .space .changeCid{
            cursor: pointer;
        }
        .sortBox .sort .space .right{
            display: inline-block;
            width: 50%;
            color: #FF4720;
            text-decoration: underline;
            text-align: right;
        }
        .sortBox .sort .partInner1{
            margin-top: 54px;
            padding-top:20px;
        }
        .sortBox .sort .partInner1 .partInner1Left{
            border-right: 1px solid #999;
            font-size: 24px;
            font-weight:bold;
            text-align: right;
            padding-right: 26px;
        }
        .sortBox .sort .partInner1 .partInner1Left .title{
            cursor: pointer;
            color: #999;
            padding-top:12px;
            font-weight: bold;
        }
        .sortBox .sort .partInner1 .partInner1Left .isActive{
            color: #333;
        }
        .sortBox .sort .partInner1 .partInner1Right{
            padding-top: 22px;
        }
        .sortBox .sort .partInner1 .partInner1Right .secondCidName{
            display: inline-block;
            cursor: pointer;
            color: #333333;
            font-size: 14px;
            padding-left: 48px;
        }

        .sortBox .sort .partInner2{
            margin-top: 54px;
        }
        .sortBox .sort .partInner2 .partInner2Box{
            padding-left: 130px;
            /*background-color: #bfa;*/
        }
        .sortBox .sort .partInner2 .partInner2Box .left{
            width: 190px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            height: 35px;
            line-height:35px;
            text-align: right;
            padding-right: 27px;
        }
        .sortBox .sort .partInner2 .partInner2Box .right{
            padding-bottom: 20px;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .btn{
            display: inline-block;
            width: 127px;
            height: 35px;
            line-height:35px;
            color: #333;
            text-align: center;
            margin-right: 10px;
            background-color: #E6E6E6;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .active{
            color: #fff;
            background-color: #FF4720;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .priceText{
            width: 127px;
            height: 35px;
            line-height:35px;
            margin-right: 10px;
            font-size: 13px;
            border: 1px solid #999;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .titleText{
            width: 100%;
            height: 35px;
            line-height:35px;
            margin-right: 10px;
            font-size: 13px;
            border: 1px solid #999;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .location{
            height: 35px;
            width: 127px;
            margin-right: 10px;
            margin-top: 6px;
            font-size: 13px;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .locationText{
            width: 305px;
            height: 35px;
            line-height:35px;
            font-size: 13px;
            border: 1px solid #999;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .detailText{
            width: 100%;
            height: 133px;
            font-size: 13px;
            border: 1px solid #999;
            onresize:none;
            outline: none;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .imagesBox{
            /*width: 150px;*/
            height: 150px;
            font-size: 14px;
            color: #333;
            text-align: center;
            overflow: hidden;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .imagesBox .nowHaveImg{
            border: 1px solid #999;
            float: left;
            margin-right: 16px;
            width: 150px;
            height: 150px;
            line-height: 150px;
            position: relative;
            cursor: pointer;
            color: #888;
            overflow: hidden;
            display: inline-block;
            margin-bottom: 20px;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .imagesBox .nowHaveImg .closeNowHaveImg{
            width: 20px;
            position: absolute;
            right: 0;
            top: 0;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .imagesBox .upload{
            height: 30px;
            line-height:30px;
            background-color: #E6E6E6;
        }
        .sortBox .sort .partInner2 .partInner2Box .right .imagesBox .uploadLogo{
            width: 88px;
            height: 70px;
            /*margin-top: 24px;*/
        }
        .sortBox .sort .partInner2 .partInner2Box .right .contactText{
            width: 246px;
            height: 35px;
            line-height:35px;
            font-size: 13px;
            margin-right: 10px;
            border: 1px solid #999;
        }
        .sortBox .sort .partInner2 .partInner2Box .publishBtn{
            text-align: center;
            padding-bottom: 10px;
        }
        .sortBox .sort .partInner2 .partInner2Box .publishBtn .publishLink{
            display: inline-block;
            width: 127px;
            height: 35px;
            line-height:35px;
            color: #fff;
            text-align: center;
            margin-right: 10px;
            background-color: #FF4720;
        }

        .sortBox .sort .partInner3{
            text-align: center;
        }
        .sortBox .sort .partInner3 .complete{
            padding-top: 60px;
        }
        .sortBox .sort .partInner3 .complete .completeImg{
            width: 180px;
            height: 180px;
        }
        .sortBox .sort .partInner3 .published{
            color: #666666;
            font-size: 14px;
            padding-bottom: 12px;
        }
        .sortBox .sort .partInner3 .completeBtn{
            padding-bottom: 10px;
            font-size: 13px;
        }
        .sortBox .sort .partInner3 .completeBtn .completeLink{
            display: inline-block;
            width: 283px;
            height: 35px;
            line-height:35px;
            color: #fff;
            text-align: center;
            background-color: #FF4720;
        }


        #selectCid{
            width: 127px;
            height: 35px;
        }


        /*a  upload */
        .a-upload {
            border: 1px solid #999;
            float: left;
            margin-right: 16px;
            width: 150px;
            /*padding: 4px 10px;*/
            height: 150px;
            line-height: 150px;
            position: relative;
            cursor: pointer;
            color: #888;
            /*border-radius: 4px;*/
            overflow: hidden;
            display: inline-block;
            *display: inline;
            *zoom: 1;
            margin-bottom: 20px;
        }
        .a-upload .closeImg{
            width: 20px;
            position: absolute;
            right: 0;
            top: 0;
        }

        .a-upload  input {
            position: absolute;
            font-size: 100px;
            right: 0;
            top: 0;
            opacity: 0;
            filter: alpha(opacity=0);
            cursor: pointer
        }


        /*publishPopBox弹窗*/
        .publishPopBox{
            position: absolute;
            background-color: RGBA(0,0,0,0.6);
            z-index: 9999;
            width: 100%;
            height: 100%;
        }
        .publishPopBox .tipOffBox{
            width: 372px;
            background-color: #fff;
            margin: 0 auto;
            margin-top: 150px;
        }
        .publishPopBox .tipOffBox .title{
            height: 37px;
            line-height:37px;
            padding-left: 12px;
            font-size: 13px;
            background-color: rgba(204, 204, 204, 1);
        }
        .publishPopBox .tipOffBox .detailTip{
            text-align: justify;
            padding:32px 40px;
            font-size: 14px;
        }
        .publishPopBox .tipOffBox .confirmBox{
            font-size: 13px;
            padding:12px 40px;
        }
        .publishPopBox .tipOffBox .confirmBox .confirmBtn{
            cursor: pointer;
            width: 127px;
            height: 35px;
            line-height:35px;
            background-color: rgba(255, 79, 13, 1);
            color: #fff;
            text-align: center;
        }
        .publishPopBox .tipOffBox .confirmBox .loginNowBtn{
            margin-right: 36px;
        }
    </style>
</head>
<body>
<section class="commonPopBox" style="display: none;">
    <div class="commonPop">
        <h3 class="title"></h3>
        <p class="detailTip"></p>
        <div class="confirmBox">
            <span class="confirmBtn">OK</span>
        </div>
    </div>
</section>
<section class="publishPopBox" style="display: none;">
    <div class="tipOffBox">
        <h3 class="title">To Publish</h3>
        <p class="detailTip">You should login first to publish a messge.Do you need to login now?</p>
        <div class="confirmBox">
            <span class="confirmBtn loginNowBtn">Login Now</span><span class="confirmBtn laterBtn">Later</span>
        </div>
    </div>
</section>
<section class="container-fluid">

    <aside class="headerBox">
        <div class="row header">
            <div class="col-xs-6 col-sm-6 headerLeft">
                <span class="lusaka"><!--Lusaka--></span>&nbsp;
                <span class="change">[Change]</span>
            </div>
            <div class="col-xs-6 col-sm-6 headerRight headerRight1" style="display: none;">
                <span class="space home">Home</span>|
                <span class="space login">Sign in</span>|
                <span class="space register">Sign up</span>|
                <a href="help.html" class="space help" target="_blank">Help</a>
            </div>
            <div class="col-xs-6 col-sm-6 headerRight headerRight2" style="display: none;">
                <span class="space home">Home</span>|
                <span class="headImgBox"><img src="" class="headImg" style="display: none;"><span class="space name"></span>|</span>
                <span class="space profile">My profile</span>|
                <span class="space logout">logout</span>|
                <a href="help.html" class="space help" target="_blank">Help</a>
            </div>
            <ul class="changeUl" style="display: none;">
                <!--<li class="changeLi"><a href="#" class="changeLiLink">Lusaka1</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka2</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka3</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka4</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka5</a></li>
                <li class="changeLi"><a href="#" class="changeLiLink">Lusaka6</a></li>-->
            </ul>
        </div>
    </aside>

    <aside class="searchBox row">
        <div class="row search col-xs-12 col-sm-12">
            <div class="col-xs-6 col-sm-6 searchLeft">
                <img class="logo" src="image/index/logo.png">
            </div>
            <div class="col-xs-6 col-sm-6 searchRight">
                <input class="ipt" type="text" placeholder="What dou you need?">
                <img class="searchImg" src="image/index/search.png">
                <button class="searchBtn">PUBLISH</button>
                <marquee style="position: absolute;left: 50px;bottom: 6px;width: 507px;height: 20px;line-height: 20px;" id="aboutmarquee"></marquee>
            </div>
        </div>
    </aside>

    <aside class="sortBox">
        <div class="row sort">
            <div class="col-xs-4 col-sm-4 part space active">
                <span class="left" style="width: auto;">1. <span class="category categoryName">CATEGORY</span></span><span class="right changeCid" style="display: none;float: right;width: auto;">CHANGE</span>
            </div>
            <div class="col-xs-4 col-sm-4 part space">
                2. DETAILS
            </div>
            <div class="col-xs-4 col-sm-4 part">
                3. COMPLETE
            </div>
            <div class="row partInner partInner1" style="display: block;">
                <div class="col-xs-2 col-sm-2 partInner1Left">
                    <!--<div class="title active">Electronic</div>
                    <div class="title">Living</div>-->
                </div>
                <div class="col-xs-10 col-sm-10 partInner1Right">
                    <!--<div class="secondCidName">Computer1</div>
                    <div class="secondCidName">Computer2</div>-->
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 partInner partInner2" style="display: none;">
                <div class="row partInner2Box">
                    <div class="col-xs-3 col-sm-3 left"></div>
                    <div class="col-xs-9 col-sm-9 right">
                        <a href="#" class="btn issell active">SELL</a><a href="#" class="btn issell">NEED</a>
                    </div>
                    <div class="col-xs-3 col-sm-3 left"></div>
                    <div class="col-xs-9 col-sm-9 right">
                        <a href="#" class="btn goodstatus active">Brand New</a><a href="#" class="btn goodstatus">New</a><a href="#" class="btn goodstatus">As New</a><a href="#" class="btn goodstatus">A Half New</a>
                    </div>
                    <!--<div class="col-xs-12 col-sm-12" style="padding-left: 190px;padding-bottom: 20px;">
                        <select name="selectCid" id="selectCid">
                            &lt;!&ndash;<option value="1">1</option>&ndash;&gt;
                        </select>
                    </div>-->
                    <div class="col-xs-3 col-sm-3 left">PRICE</div>
                    <div class="col-xs-9 col-sm-9 right">
                        <input type="text" class="priceText"><a href="###" class="btn negotiated">Negotiated</a>
                    </div>
                    <div class="col-xs-3 col-sm-3 left">TITLE</div>
                    <div class="col-xs-9 col-sm-9 right">
                        <input type="text" class="titleText">
                    </div>
                    <div class="col-xs-3 col-sm-3 left">ADD</div>
                    <div class="col-xs-9 col-sm-9 right">
                        <select class="location location1" id="location1">
                            <!--<option value="LUSAKA">LUSAKA</option>-->
                        </select>
                        <select class="location location2" id="location2">
                            <!--<option value="二级地理位置">二级地理位置</option>-->
                            <!--<option value="北京">北京</option>-->
                        </select>
                        <!--<select class="location location3">
                            <option value="三级地理位置">三级地理位置</option>
                            <option value="西城">西城</option>
                        </select>-->
                        <input type="text" class="locationText">
                    </div>
                    <div class="col-xs-3 col-sm-3 left">DETAILS</div>
                    <div class="col-xs-9 col-sm-9 right">
                        <!--<input type="text" class="detailText">-->
                        <textarea class="detailText" name="detailText" id="detailText" cols="30" rows="10"></textarea>
                    </div>
                    <div class="col-xs-3 col-sm-3 left">IMAGES</div>
                    <div class="col-xs-9 col-sm-9 right" style="margin-bottom: 0;">
                        <div class="imagesBox">
                            <!--<div class="nowHaveImg" style="background: url('image/index/headImg.png') no-repeat center center"></div>-->
                            <!--<img style="width: 150px;height: 150px;position: relative;left: 0;" src="image/index/logo.png" alt="">-->
                            <!--<img style="width: 150px;height: 150px;position: relative;left: 0;" src="image/index/logo.png" alt="">-->
                            <!--<p class="upload">Upload Image</p>-->
                            <!--<input type="file" id="upfile">-->
                            <a href="javascript:;" class="a-upload a-upload1">
                                <input type="file" accept="image/png, image/jpeg" id="upfile1" name="file"><img class="uploadLogo uploadLogo1" src="image/publish/upload.png">
                                <span class="showFileName showFileName1"></span>
                                <img class="closeImg closeImg1" style="display: none;" src="image/publish/close.png"/>
                            </a>
                            <a href="javascript:;" class="a-upload a-upload2" style="display: none;">
                                <input type="file" accept="image/png, image/jpeg" id="upfile2" name="file"><img class="uploadLogo uploadLogo2" src="image/publish/upload.png">
                                <span class="showFileName showFileName2"></span>
                                <img class="closeImg closeImg2" style="display: none;" src="image/publish/close.png"/>
                            </a>
                            <a href="javascript:;" class="a-upload a-upload3" style="display: none;">
                                <input type="file" accept="image/png, image/jpeg" id="upfile3" name="file"><img class="uploadLogo uploadLogo3" src="image/publish/upload.png">
                                <span class="showFileName showFileName3"></span>
                                <img class="closeImg closeImg3" style="display: none;" src="image/publish/close.png"/>
                            </a>
                            <a href="javascript:;" class="a-upload a-upload4" style="display: none;">
                                <input type="file" accept="image/png, image/jpeg" id="upfile4" name="file"><img class="uploadLogo uploadLogo4" src="image/publish/upload.png">
                                <span class="showFileName showFileName4"></span>
                                <img class="closeImg closeImg4" style="display: none;" src="image/publish/close.png"/>
                            </a>
                        </div>
                    </div>
                    <div class="col-xs-3 col-sm-3 left">CONTACT</div>
                    <div class="col-xs-9 col-sm-9 right">
                        <input type="text" class="contactText contactName" placeholder="Your Name"><input type="text" class="contactText contactPhone" placeholder="Your Cellphone Number">
                    </div>
                    <div class="col-xs-12 col-sm-12 publishBtn"><a href="###" class="publishLink">PUBLISH</a></div>
                </div>
            </div>
            <div class="row partInner partInner3" style="display: none;">
                <div class="col-xs-12 col-sm-12 complete">
                    <img class="completeImg" src="image/publish/complete.png">
                </div>
                <div class="col-xs-12 col-sm-12 published">
                    Your message has published.
                </div>
                <div class="col-xs-12 col-sm-12 completeBtn"><a href="###" class="completeLink">Check this message</a></div>
            </div>
        </div>
    </aside>
</section>
<script type="text/javascript" src="js/jquery-3.0.0.min.js"></script>
<script type="text/javascript" src="js/swiper.min.js"></script>
<script type="text/javascript" src="js/public.js"></script>
<script type="text/javascript" src="js/headerBox.js"></script>
<script type="text/javascript" src="js/searchBoxRight.js"></script>
<script type="text/javascript">
    $(function(){


        //JavaScript通过元素的索引号删除数组中的元素
        function RemoveValByIndex(arr, index) {
            arr.splice(index, 1);
        }

        //getmarquee
        $.ajax({
            type: "get",
            url: baseUrl+"/apigateway/getmarquee",
            dataType:"json",
            success: function(data){
                if(data.status ==200){
                    console.log('getmarquee',data);
                    $('#aboutmarquee').html(data.data);
                }

            },
            error:function(error){
                console.log(error);
            }
        });


        //用户未登录时弹窗
        $('.publishPopBox .tipOffBox .confirmBox .loginNowBtn').unbind('click').click(function(){
            window.location.href = "login.html?goLogin="+1;
        });
        $('.publishPopBox .tipOffBox .confirmBox .laterBtn').unbind('click').click(function(){
            $('.publishPopBox').hide();
            $('body').css('overflow', 'auto');
            if(getParamByUrl('searchPart') == 'searchPart'){
                window.close();
            }else{
                window.history.go(-1);
            }
        });

        var imgIdAll1 = '';
        var imgIdAll2 = '';
        var imgIdAll3 = '';
        var imgIdAll4 = '';
        var totalImgIdAll = '';
        var updateOldImgArr = [];
        var updateNewImgArr = [];
        var uploadSuccess1 = true;
        var uploadSuccess2 = true;
        var uploadSuccess3 = true;
        var uploadSuccess4 = true;
        $(".a-upload1").on("change","input[type='file']",function(){
            uploadSuccess1 = false;
            $(".a-upload2").show();
            $('.uploadLogo1').hide();
            var filePath=$(this).val();
            if(filePath.indexOf("jpg")!=-1 || filePath.indexOf("png")!=-1){
                $(".fileerrorTip").html("").hide();
                var arr=filePath.split('\\');
                var fileName=arr[arr.length-1];
                $(".showFileName1").html("uploading");

                //上传图片
                var fd = new FormData();
                fd.append("upload", 1);
                console.log($("#upfile1").get(0).files[0]);
                fd.append("upfile", $("#upfile1").get(0).files[0]);
                $.ajax({
                    url: baseUrl+"/apigateway/upfile",
                    type: "POST",
                    processData: false,
                    contentType: false,
                    data: fd,
                    success: function(imgData) {
                        if(imgData.status == 200) {
                            uploadSuccess1 = true;
                            var extdata1 = imgData.extdata;
                            $('.a-upload .closeImg1').show().unbind('click').click(function(){
                                uploadSuccess1 = true;
                                $.ajax({
                                    type: "get",
                                    url: baseUrl+"/apigateway/dimg?id="+extdata1,
                                    dataType:"json",
                                    success: function(data){
                                        console.log("删除图片1成功！",data);
                                    },
                                    error:function(error){
                                        console.log(error);
                                    }
                                });
                                
                                $(".a-upload2").hide();
                                $('.uploadLogo1').show();
                                $(".showFileName1").html('');
                                totalImgIdAll = '';
                                console.log("totalImgIdAll="+totalImgIdAll);

                                RemoveValByIndex(updateNewImgArr, 0);
                                console.log('updateNewImgArr',updateNewImgArr);
                            });
                            $(".showFileName1").html(fileName);
                            console.log(imgData);
                            console.log(imgData.data);
                            imgIdAll1 = imgData.data;
                            totalImgIdAll = imgIdAll1;
                            console.log("totalImgIdAll="+totalImgIdAll);

                            updateNewImgArr.push(imgData.data);
                            console.log('updateNewImgArr',updateNewImgArr);


                            $(".a-upload2").on("change","input[type='file']",function(){
                                uploadSuccess2 = false;
                                $(".a-upload3").show();
                                $('.uploadLogo2').hide();
                                var filePath=$(this).val();
                                if(filePath.indexOf("jpg")!=-1 || filePath.indexOf("png")!=-1){
                                    $(".fileerrorTip").html("").hide();
                                    var arr=filePath.split('\\');
                                    var fileName=arr[arr.length-1];
                                    $(".showFileName2").html("uploading");

                                    //上传图片
                                    var fd = new FormData();
                                    fd.append("upload", 1);
                                    console.log($("#upfile2").get(0).files[0]);
                                    fd.append("upfile", $("#upfile2").get(0).files[0]);
                                    $.ajax({
                                        url: baseUrl+"/apigateway/upfile",
                                        type: "POST",
                                        processData: false,
                                        contentType: false,
                                        data: fd,
                                        success: function(imgData) {
                                            if(imgData.status == 200) {
                                                uploadSuccess2 = true;
                                                var extdata2 = imgData.extdata;
                                                $('.a-upload .closeImg2').show().unbind('click').click(function(){
                                                    uploadSuccess2 = true;
                                                    $.ajax({
                                                        type: "get",
                                                        url: baseUrl+"/apigateway/dimg?id="+extdata2,
                                                        dataType:"json",
                                                        success: function(data){
                                                            console.log("删除图片2成功！",data);
                                                        },
                                                        error:function(error){
                                                            console.log(error);
                                                        }
                                                    });

                                                    $(".a-upload3").hide();
                                                    $('.uploadLogo2').show();
                                                    $(".showFileName2").html('');
                                                    imgIdAll2 = '';
                                                    totalImgIdAll = imgIdAll1;
                                                    console.log("totalImgIdAll="+totalImgIdAll);

                                                    RemoveValByIndex(updateNewImgArr, 1);
                                                    console.log('updateNewImgArr',updateNewImgArr);

                                                });

                                                $(".showFileName2").html(fileName);
                                                console.log(imgData);
                                                console.log(imgData.data);
                                                imgIdAll2 = imgData.data;
                                                totalImgIdAll = imgIdAll1+','+imgIdAll2;
                                                console.log("totalImgIdAll="+totalImgIdAll);

                                                updateNewImgArr.push(imgData.data);
                                                console.log('updateNewImgArr',updateNewImgArr);


                                                $(".a-upload3").on("change","input[type='file']",function(){
                                                    uploadSuccess3 = false;
                                                    $(".a-upload4").show();
                                                    $('.uploadLogo3').hide();
                                                    var filePath=$(this).val();
                                                    if(filePath.indexOf("jpg")!=-1 || filePath.indexOf("png")!=-1){
                                                        $(".fileerrorTip").html("").hide();
                                                        var arr=filePath.split('\\');
                                                        var fileName=arr[arr.length-1];
                                                        $(".showFileName3").html("uploading");

                                                        //上传图片
                                                        var fd = new FormData();
                                                        fd.append("upload", 1);
                                                        console.log($("#upfile3").get(0).files[0]);
                                                        fd.append("upfile", $("#upfile3").get(0).files[0]);
                                                        $.ajax({
                                                            url: baseUrl+"/apigateway/upfile",
                                                            type: "POST",
                                                            processData: false,
                                                            contentType: false,
                                                            data: fd,
                                                            success: function(imgData) {
                                                                if(imgData.status == 200) {
                                                                    uploadSuccess3 = true;
                                                                    var extdata3 = imgData.extdata;
                                                                    $('.a-upload .closeImg3').show().unbind('click').click(function(){
                                                                        uploadSuccess3 = true;
                                                                        $.ajax({
                                                                            type: "get",
                                                                            url: baseUrl+"/apigateway/dimg?id="+extdata3,
                                                                            dataType:"json",
                                                                            success: function(data){
                                                                                console.log("删除图片3成功！",data);
                                                                            },
                                                                            error:function(error){
                                                                                console.log(error);
                                                                            }
                                                                        });

                                                                        $(".a-upload4").hide();
                                                                        $('.uploadLogo3').show();
                                                                        $(".showFileName3").html('');
                                                                        imgIdAll3 = '';
                                                                        totalImgIdAll = imgIdAll1+','+imgIdAll2;
                                                                        console.log("totalImgIdAll="+totalImgIdAll);

                                                                        RemoveValByIndex(updateNewImgArr, 2);
                                                                        console.log('updateNewImgArr',updateNewImgArr);

                                                                    });

                                                                    $(".showFileName3").html(fileName);
                                                                    console.log(imgData);
                                                                    console.log(imgData.data);
                                                                    imgIdAll3 = imgData.data;
                                                                    totalImgIdAll = imgIdAll1+','+imgIdAll2+','+imgIdAll3;
                                                                    console.log("totalImgIdAll="+totalImgIdAll);

                                                                    updateNewImgArr.push(imgData.data);
                                                                    console.log('updateNewImgArr',updateNewImgArr);


                                                                    $(".a-upload4").on("change","input[type='file']",function(){
                                                                        uploadSuccess4 = false;
                                                                        $('.uploadLogo4').hide();
                                                                        var filePath=$(this).val();
                                                                        if(filePath.indexOf("jpg")!=-1 || filePath.indexOf("png")!=-1){
                                                                            $(".fileerrorTip").html("").hide();
                                                                            var arr=filePath.split('\\');
                                                                            var fileName=arr[arr.length-1];
                                                                            $(".showFileName4").html("uploading");

                                                                            //上传图片
                                                                            var fd = new FormData();
                                                                            fd.append("upload", 1);
                                                                            console.log($("#upfile4").get(0).files[0]);
                                                                            fd.append("upfile", $("#upfile4").get(0).files[0]);
                                                                            $.ajax({
                                                                                url: baseUrl+"/apigateway/upfile",
                                                                                type: "POST",
                                                                                processData: false,
                                                                                contentType: false,
                                                                                data: fd,
                                                                                success: function(imgData) {
                                                                                    if(imgData.status == 200) {
                                                                                        uploadSuccess4 = true;
                                                                                        var extdata4 = imgData.extdata;
                                                                                        $('.a-upload .closeImg4').show().unbind('click').click(function(){
                                                                                            uploadSuccess4 = true;
                                                                                            $.ajax({
                                                                                                type: "get",
                                                                                                url: baseUrl+"/apigateway/dimg?id="+extdata4,
                                                                                                dataType:"json",
                                                                                                success: function(data){
                                                                                                    console.log("删除图片4成功！",data);
                                                                                                },
                                                                                                error:function(error){
                                                                                                    console.log(error);
                                                                                                }
                                                                                            });

                                                                                            $('.uploadLogo4').show();
                                                                                            $(".showFileName4").html('');
                                                                                            imgIdAll4 = '';
                                                                                            totalImgIdAll = imgIdAll1+','+imgIdAll2+','+imgIdAll3;
                                                                                            console.log("totalImgIdAll="+totalImgIdAll);

                                                                                            RemoveValByIndex(updateNewImgArr, 3);
                                                                                            console.log('updateNewImgArr',updateNewImgArr);

                                                                                        });

                                                                                        $(".showFileName4").html(fileName);
                                                                                        console.log(imgData);
                                                                                        console.log(imgData.data);
                                                                                        imgIdAll4 = imgData.data;
                                                                                        totalImgIdAll = imgIdAll1+','+imgIdAll2+','+imgIdAll3+','+imgIdAll4;
                                                                                        console.log("totalImgIdAll="+totalImgIdAll);

                                                                                        updateNewImgArr.push(imgData.data);
                                                                                        console.log('updateNewImgArr',updateNewImgArr);
                                                                                    }
                                                                                }
                                                                            });

                                                                        }else{
                                                                            $(".showFileName4").html("");
                                                                            $(".fileerrorTip").html("您未上传文件，或者您上传文件类型有误！").show();
                                                                            return false
                                                                        }
                                                                    });


                                                                }
                                                            }
                                                        });

                                                    }else{
                                                        $(".showFileName3").html("");
                                                        $(".fileerrorTip").html("您未上传文件，或者您上传文件类型有误！").show();
                                                        return false
                                                    }
                                                });


                                            }
                                        }
                                    });

                                }else{
                                    $(".showFileName2").html("");
                                    $(".fileerrorTip").html("您未上传文件，或者您上传文件类型有误！").show();
                                    return false
                                }
                            });


                        }
                    }
                });

            }else{
                $(".showFileName1").html("");
                $(".fileerrorTip").html("您未上传文件，或者您上传文件类型有误！").show();
                return false
            }
        });


        //点击图片logo跳转到index页面；
        $('.searchBox .search .searchLeft .logo').click(function () {
            window.location.href = 'index.html' + window.location.search;
        });




        /*点击发布按钮*/

        var cid;
        $.ajax({
            type: "get",
            url: baseUrl+"/apigateway/categorys",
            dataType:"json",
            success: function(data){
                if(data.status == 200){
                    data = JSON.parse(data.data);
                    console.log("获得产品分类",data);
                    var str = '';
                    var categorysNameArr = [];
                    var categorysCidArr = [];
                    for (var sort in data){
                        categorysNameArr.push(data[sort].name);
                        categorysCidArr.push(data[sort].cid);
                        $('.sortBox .sort .partInner1 .partInner1Left').append('<div class="title">'+data[sort].name+'</div>');
                    }
                    
                    //初始化
                    var chushiSubArr = data[0].sub;
                    console.log("chushiSubArr", chushiSubArr);
                    for(var i=0; i<chushiSubArr.length; i++){
                        $('.sortBox .sort .partInner1 .partInner1Right').append('<div class="secondCidName">'+chushiSubArr[i].name+'</div>');
                    }
//                    cid = chushiSubArr[0].cid;
                    $('.sortBox .sort .partInner1 .partInner1Left .title').eq(0).addClass('isActive');
                    //初始化：没有点击一级菜单时，直接点击二级菜单
                    $('.sortBox .sort .partInner1 .partInner1Right .secondCidName').unbind('click').click(function(){
                        var secondIndex = $(this).index();
                        cid = chushiSubArr[secondIndex].cid;
                        console.log('cid='+cid);
                        $('.sortBox .sort .part').removeClass("active").eq(1).addClass("active");
                        $('.sortBox .sort .partInner').hide().eq(1).show();
                        $('.sortBox .sort .space .changeCid').show();
                    });

                    //点击一级菜单
                    var firstIndex = 0;
                    $('.sortBox .sort .partInner1 .partInner1Left .title').unbind('click').click(function(){
                        var categoryName = '';
                        var index = $(this).index();
                        $('.sortBox .sort .partInner1 .partInner1Left .title').removeClass('isActive').eq(index).addClass('isActive');
                        var nowSubArr = data[index].sub;
                        $('.sortBox .sort .partInner1 .partInner1Right').empty();
                        for(var i=0; i<nowSubArr.length; i++){
                            $('.sortBox .sort .partInner1 .partInner1Right').append('<div class="secondCidName">'+nowSubArr[i].name+'</div>');
                        }

                        categoryName = data[index].name;
                        $('.sortBox .sort .space .left .categoryName').empty().html(categoryName);

                        //点击二级菜单
                        $('.sortBox .sort .partInner1 .partInner1Right .secondCidName').unbind('click').click(function(){
                            var categoryName2 = '';
                            var secondIndex = $(this).index();
                            cid = nowSubArr[secondIndex].cid;
                            console.log('cid='+cid);
                            $('.sortBox .sort .part').removeClass("active").eq(1).addClass("active");
                            $('.sortBox .sort .partInner').hide().eq(1).show();
                            $('.sortBox .sort .space .changeCid').show();
                            categoryName2 = (">"+nowSubArr[secondIndex].name);

                            $('.sortBox .sort .space .left .categoryName').empty().html(categoryName + categoryName2);
                        });
                    });

                    //点击change修改cid
                    $('.sortBox .sort .space .changeCid').unbind('click').click(function () {
                        $('.sortBox .sort .part').removeClass("active").eq(0).addClass("active");
                        $('.sortBox .sort .partInner').hide().eq(0).show();
                        $('.sortBox .sort .space .changeCid').hide();
                    });

                    

                    /*$('#selectCid').on('change', function(){
                        for(var i=0; i<categorysNameArr.length; i++){
//                            console.log(categorysNameArr[i]);
                            if($('#selectCid option:selected').html() == categorysNameArr[i]){
//                                alert(categorysNameArr[i]);
                                cid = categorysCidArr[i];

                            }
                        }
//                        alert(cid);
                    });*/
//                    alert(cid);




                }else{
                    commonPopFun(data.msg, 'Failed');
                }
            },
            error:function(error){
                console.log(error);
            }

        });



        //获取地址id
//        $('#location1')
        var addr_l1;
        var addr_l2;
        $.ajax({
            type: "get",
            url: baseUrl+"/apigateway/areas",
            dataType:"json",
            success: function(data){
                if (data.status == 200){
                    data = JSON.parse(data.data);
                    console.log("获得区域信息2", data);
                    var str1 = '';
                    var str2 = '';
                    var str3 = '';
                    var locationArr1 = [];
                    var locationArr1Id = [];
                    var locationArr2 = [];
                    for (var sort in data){
                        locationArr1.push(data[sort].name);
                        locationArr1Id.push(data[sort].id);
                        locationArr2.push(data[sort].sub);
                        str1 += "<option>"+data[sort].name+"</option>";
                    }
                    console.log('locationArr1',locationArr1);
                    console.log('locationArr2',locationArr2);
                    $('#location1').append(str1);

                    //不显示默认地址
                    $('#location1 option').each(function (index) {
                        if($('#location1 option').eq(index).html() == ''){
                            $(this).hide();
                        }
                    });
                    
                    addr_l1 = locationArr1Id[0];
                    addr_l2 = locationArr2[0][0].id;
                    console.log(addr_l1);
                    console.log(addr_l2);
                    for(var i=0; i<locationArr2[0].length; i++){
                        str2 += "<option>"+locationArr2[0][i].name+"</option>";
                    }
                    console.log(str2);
                    $('#location2').append(str2);

                    $('#location1').change(function (){
                        str3 = '';
                        $('#location2').empty();
                        for(let i=0; i<locationArr1.length; i++){
                            if($('#location1 option:selected').html() == locationArr1[i]){
                                console.log(i);
                                addr_l1 = locationArr1Id[i];
                                console.log('addr_l1='+addr_l1);

                                for(var j=0; j<locationArr2[i].length; j++){
                                    str3 = "<option>"+locationArr2[i][j].name+"</option>";
                                    $('#location2').append(str3);
                                    if($('#location2 option:selected').html() == locationArr2[i][j].name){
                                        addr_l2 = locationArr2[i][j].id;
                                        console.log('addr_l2='+addr_l2);
                                    }
                                }

                                
                            }
                        }
                    });
                    var clickBtn = 0;
                    $('#location2').change(function (){

                        for(let i=0; i<locationArr1.length; i++){
                            if($('#location1 option:selected').html() == locationArr1[i]){
                                addr_l1 = locationArr1Id[i];
                                console.log('addr_l1='+addr_l1);

//                                $('#location2').empty();
                                for(let j=0; j<locationArr2[i].length; j++){

                                    str3 = "<option>"+locationArr2[i][j].name+"</option>";
                                    if(clickBtn == 0){
                                        clickBtn++;
                                        $('#location2').append(str3);
                                    }
                                    if($('#location2 option:selected').html() == locationArr2[i][j].name){
                                        addr_l2 = locationArr2[i][j].id;
                                        console.log('addr_l2='+addr_l2);
                                    }
                                }


                            }
                        }
                    });
                }
            },
            error: function (error) {
                console.log(error);
            }
        });


        //issell
        var issell = "1";//"1"为出售，"0"为需求
        $('.sortBox .sort .partInner2 .partInner2Box .right .issell').click(function(){
            $('.sortBox .sort .partInner2 .partInner2Box .right .issell').removeClass('active');
            $(this).addClass('active');
            $('.sortBox .sort .partInner2 .partInner2Box .right .issell').each(function(index){
                if($('.sortBox .sort .partInner2 .partInner2Box .right .issell').eq(index).hasClass('active')){
                    issell = index;
                }
            });
            issell = issell.toString();
//            alert(issell);
        });


        //goodstatus
        var goodstatus = "0";
        $('.sortBox .sort .partInner2 .partInner2Box .right .goodstatus').click(function(){
            $('.sortBox .sort .partInner2 .partInner2Box .right .goodstatus').removeClass('active');
            $(this).addClass('active');
            $('.sortBox .sort .partInner2 .partInner2Box .right .goodstatus').each(function(index){
                if($('.sortBox .sort .partInner2 .partInner2Box .right .goodstatus').eq(index).hasClass('active')){
                    goodstatus = index;
                }
            });
            console.log(goodstatus);
            goodstatus = goodstatus.toString();
        });



        //处理price
        var priceText = 0;
        var priceRight = false;
        $('.sortBox .sort .partInner2 .partInner2Box .right .priceText').blur(function(){
            priceText = $.trim($('.sortBox .sort .partInner2 .partInner2Box .right .priceText').val());
            if(priceText>=0 && priceText <=100000000){
                priceRight = true;
                if(priceText == ''){
                    priceText = 0;
                }
            }else{
                priceRight = false;

                commonPopFun("The price should be in the range of 0 to 100000000", 'Failed');

                priceText = 0;
                $('.sortBox .sort .partInner2 .partInner2Box .right .priceText').val('');
            }
            console.log(priceText);
        });
        $('.sortBox .sort .partInner2 .partInner2Box .right .negotiated').click(function(){

            priceRight = true;
            priceText = 0;
            if($('.sortBox .sort .partInner2 .partInner2Box .right .priceText').is(':hidden')){
                $('.sortBox .sort .partInner2 .partInner2Box .right .priceText').val('').show();
                $(this).removeClass('active');
            }else{
                $(this).addClass('active');
//            $('.sortBox .sort .partInner2 .partInner2Box .right .priceText').hide();
                $('.sortBox .sort .partInner2 .partInner2Box .right .priceText').val('').hide();
            }



            console.log(priceText);
        });


        //如果是用户编辑发布，则保存相应信息
        var needUpdate = getParamByUrl('needUpdate');
        var updateOldNum = [];//已有图片的下标
        var updatepubcontentId = getParamByUrl('updatepubcontentId');
        if(needUpdate == 1){
            $.ajax({
                type: "get",
                url: baseUrl+"/apigateway/getgood?id="+updatepubcontentId,
                dataType:"json",
                success: function(data){
                    if(data.status == 200){
                        data = JSON.parse(data.data);
                        console.log("获得指定产品的产品信息",data);

                        //获取用户已发布的图片信息
                        updateOldImgArr = data.imgs.split(',');
                        for(var i=0; i<updateOldImgArr.length; i++){
                            $('.sortBox .sort .partInner2 .partInner2Box .right .imagesBox').prepend(
                                    '<div class="nowHaveImg" style="background: url('+baseImgSrc+updateOldImgArr[i]+') no-repeat center center"><img class="closeNowHaveImg" src="image/publish/close.png"/></div>'
                            );
                        }

                        $('.sortBox .sort .partInner2 .partInner2Box .right .imagesBox .nowHaveImg').delegate('.closeNowHaveImg','click', function(){
                            var index = $(this).parents('.nowHaveImg').index();
                            updateOldNum.push(index);
                            updateOldNum = updateOldNum.sort(function(a, b){
//                                return a - b; //正序
                                //return 0; //不改变顺序
                                return b - a; //逆序
                            });
                            console.log('updateOldNum',updateOldNum);
                            $('.sortBox .sort .partInner2 .partInner2Box .right .imagesBox .nowHaveImg').eq(index).hide();
                        });

//                     ;



                        issell = data.issell;
                        $('.sortBox .sort .partInner2 .partInner2Box .right .issell').removeClass('active').eq(issell).addClass('active');

                        goodstatus = data.goodstatus;
                        $('.sortBox .sort .partInner2 .partInner2Box .right .issell').removeClass('active').eq(goodstatus).addClass('active');

                        $('.sortBox .sort .partInner2 .partInner2Box .right .priceText').val(data.price);
                        $('.sortBox .sort .partInner2 .partInner2Box .right .titleText').val(data.title);
                        $('.sortBox .sort .partInner2 .partInner2Box .right .locationText').val(data.addr_l4);
                        $('.sortBox .sort .partInner2 .partInner2Box .right .detailText').val(data.details);
                    }else{
                        commonPopFun(data.msg, 'Failed');
                    }
                },
                error:function(error){
                    console.log(error);
                }
            });
        }


        //detailText:回车换行
        $('#detailText').bind('input propertychange', function(){
            document.onkeydown = function(ev){
                ev = ev || event;
                console.log(ev.keyCode);
                if(ev.keyCode == 13){
                    //换行转回车
                    var haha=document.getElementById("detailText").value;
                    haha=haha.replace('<br />','/n');
                    document.getElementById("detailText").value=haha;
                }
            };
        });


        var publishClick = true;
        $('.sortBox .sort .partInner2 .partInner2Box .publishBtn').click(function(){
            if((needUpdate == 1 || priceRight) && ($('.sortBox .sort .partInner2 .partInner2Box .right .titleText').val() !='')
            && ($('.sortBox .sort .partInner2 .partInner2Box .right .locationText').val() !='')
            && ($('.sortBox .sort .partInner2 .partInner2Box .right .detailText').val() !='')
            && ($('.sortBox .sort .partInner2 .partInner2Box .right .contactName').val() !='')
            && ($('.sortBox .sort .partInner2 .partInner2Box .right .contactPhone').val() !='')
            && uploadSuccess1
            && uploadSuccess2
            && uploadSuccess3
            && uploadSuccess4
            ){


                if(($('.sortBox .sort .partInner2 .partInner2Box .right .locationText').val() == '')){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .locationText').css('border','1px solid #f00');
                }
                if(($('.sortBox .sort .partInner2 .partInner2Box .right .detailText').val() == '')){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .detailText').css('border','1px solid #f00');
                }
                if(($('.sortBox .sort .partInner2 .partInner2Box .right .contactName').val() == '')){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .contactName').css('border','1px solid #f00');
                }
                if(($('.sortBox .sort .partInner2 .partInner2Box .right .contactPhone').val() == '')){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .contactPhone').css('border','1px solid #f00');
                }


                var token = localStorage.getItem("token");
                console.log('localStorage.getItem("token")',localStorage.getItem("token"));
                token=(token == null)?"":token;


                //执行提交
                if(needUpdate == 1){//编辑商品

                    for(var i=0; i<updateOldNum.length; i++){
                        RemoveValByIndex(updateOldImgArr, i);
                    }
                    var updateTotalImgIdAll = updateOldImgArr.concat(updateNewImgArr);
                    console.log('updateTotalImgIdAll',updateTotalImgIdAll);
                    var updateTotalImgIdStr = '';
                    for(var i=0; i<updateTotalImgIdAll.length; i++){
                        var aa = updateTotalImgIdAll[i]+',';
                        updateTotalImgIdStr+=aa;
                    }
                    updateTotalImgIdStr = updateTotalImgIdStr.slice(0, -1);
                    console.log('updateTotalImgIdStr', updateTotalImgIdStr);

                    if(publishClick){
                        publishClick = false;
                        var updateGoodInfo = {
                            "token":token, 			//用户登录凭证，如果是匿名发布则留空""
                            "id":updatepubcontentId, //需要编辑的商品的id
                            "cid":cid.toString(),				//产品分类ID (需调整)
                            "issell":issell,		//是否是出售，"1"为出售，"0"为需求
                            "goodstatus":goodstatus,		//产品新旧,"0","1","2","3","4","5"...
                            "price":priceText.toString(),			//价格
                            "title":$('.sortBox .sort .partInner2 .partInner2Box .right .titleText').val(),		//标题
                            "details":$('.sortBox .sort .partInner2 .partInner2Box .right .detailText').val(),	//产品详情
                            "addr_l1":addr_l1.toString(),			//一级地址 ID
                            "addr_l2":addr_l2.toString(),			//二级地址 ID
                            "addr_l3":"0",			//三级地址 ID
                            "addr_l4":$('.sortBox .sort .partInner2 .partInner2Box .right .locationText').val(),			//详细地址
                            "contactname":$('.sortBox .sort .partInner2 .partInner2Box .right .contactName').val(),	//联系人姓名
                            "phone":$('.sortBox .sort .partInner2 .partInner2Box .right .contactPhone').val(),		//联系人手机
                            "imgs":updateTotalImgIdStr				//产品图片ID，图片ID通过图片上传接口获得
                        };
                        console.log("updateGoodInfo", updateGoodInfo);

                        $.ajax({
                            type:"POST",
                            url:baseUrl + "/apigateway/updatepubcontent",
                            dataType:"json",
                            data:JSON.stringify(updateGoodInfo),
                            success:function(data){
                                console.log(data);
                                if(data.status == 200){
//                                alert(data.status);
                                    //保存id，点击CLICK IT 进入该商品详情页
                                    localStorage.setItem('goodIdFromCategory',data.data);
                                    $('.sortBox .sort .part').removeClass("active").eq(2).addClass("active");
                                    $('.sortBox .sort .partInner').hide().eq(2).show();
                                    $('.sortBox .sort .space .changeCid').hide();

                                    $('.sortBox .sort .partInner3 .completeBtn').click(function(){
                                        window.open("detail.html?id="+updatepubcontentId);
//                                window.location.href = "detail.html?id="+data.data;
                                    });
                                }else{
                                    commonPopFun(data.msg, 'Failed');
                                }
                            },
                            error:function(error){
                                console.log(error);
                            }
                        });
                    }

                }else{//发布商品
                    var pubGoodInfo = {
                        "token":token, 			//用户登录凭证，如果是匿名发布则留空""
                        "cid":cid.toString(),				//产品分类ID (需调整)
                        "issell":issell,		//是否是出售，"1"为出售，"0"为需求
                        "goodstatus":goodstatus,		//产品新旧,"0","1","2","3","4","5"...
                        "price":priceText.toString(),			//价格
                        "title":$('.sortBox .sort .partInner2 .partInner2Box .right .titleText').val(),		//标题
                        "details":$('.sortBox .sort .partInner2 .partInner2Box .right .detailText').val(),	//产品详情
                        "addr_l1":addr_l1.toString(),			//一级地址 ID
                        "addr_l2":addr_l2.toString(),			//二级地址 ID
                        "addr_l3":"0",			//三级地址 ID
                        "addr_l4":$('.sortBox .sort .partInner2 .partInner2Box .right .locationText').val(),			//详细地址
                        "contactname":$('.sortBox .sort .partInner2 .partInner2Box .right .contactName').val(),	//联系人姓名
                        "phone":$('.sortBox .sort .partInner2 .partInner2Box .right .contactPhone').val(),		//联系人手机
                        "imgs":totalImgIdAll				//产品图片ID，图片ID通过图片上传接口获得
                    };
                    console.log("pubGoodInfo", pubGoodInfo);

                    $.ajax({
                        type:"POST",
                        url:baseUrl + "/apigateway/pubgood",
                        dataType:"json",
                        data:JSON.stringify(pubGoodInfo),
                        success:function(data){
                            console.log(data);
                            if(data.status == 200){
//                                alert(data.status);
                                //保存id，点击CLICK IT 进入该商品详情页
                                localStorage.setItem('goodIdFromCategory',data.data);
                                $('.sortBox .sort .part').removeClass("active").eq(2).addClass("active");
                                $('.sortBox .sort .partInner').hide().eq(2).show();
                                $('.sortBox .sort .space .changeCid').hide();

                                $('.sortBox .sort .partInner3 .completeBtn').click(function(){
                                    window.open("detail.html?id="+data.data);
//                                window.location.href = "detail.html?id="+data.data;
                                });
                            }else{
                                commonPopFun(data.msg, "Failed");
                            }
                        },
                        error:function(error){
                            console.log(error);
                        }
                    });
                }




            }else{
                if(($('.sortBox .sort .partInner2 .partInner2Box .right .titleText').val() == '')){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .titleText').css('border','1px solid #f00');
                }
                if(($('.sortBox .sort .partInner2 .partInner2Box .right .locationText').val() == '')){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .locationText').css('border','1px solid #f00');
                }
                if(($('.sortBox .sort .partInner2 .partInner2Box .right .detailText').val() == '')){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .detailText').css('border','1px solid #f00');
                }
                if(($('.sortBox .sort .partInner2 .partInner2Box .right .contactName').val() == '')){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .contactName').css('border','1px solid #f00');
                }
                if(($('.sortBox .sort .partInner2 .partInner2Box .right .contactPhone').val() == '')){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .contactPhone').css('border','1px solid #f00');
                }
                if((($('.sortBox .sort .partInner2 .partInner2Box .right .priceText').val() == '') && (priceRight == false))){
                    $('.sortBox .sort .partInner2 .partInner2Box .right .priceText').css('border','1px solid #f00');
                }
                commonPopFun("Please complete all of the details to publish","Failed");
            }
            
        });


    });

</script>
</body>
</html>