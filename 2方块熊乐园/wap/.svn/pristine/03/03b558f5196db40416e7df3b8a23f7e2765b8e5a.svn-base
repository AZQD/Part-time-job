lua_shared_dict infopub_themples 2m;
lua_shared_dict infopub_session 20m;

server {
    listen       80;
    server_name  lusaka.youkongwan.com lusaka.wxwenku.com;
    server_tokens off;
    more_set_headers 'Server: nginx';
    charset utf-8;

    chunked_transfer_encoding off;
    lua_code_cache off;

    set $base_dir  '/usr/local/openresty/nginx/html/lusaka/infopub';

    resolver 10.202.72.118;
    location / {
        default_type text/html;
        content_by_lua_file $base_dir/lua/index.lua;
    }
    
    location /s {
        default_type text/html;
        content_by_lua_file $base_dir/lua/search.lua;
    }

    location /reg {
		default_type text/html;
        content_by_lua_file $base_dir/lua/user_reg.lua;
    }

    location /login {
		default_type text/html;
        content_by_lua_file $base_dir/lua/user_login.lua;
    }
    
    location /pub {
    	default_type text/html;
        content_by_lua_file $base_dir/lua/publish.lua;
    }
    
    location /spub {
    	default_type text/html;
        content_by_lua_file $base_dir/lua/spublish.lua;
    }
    
    location /list {
    	default_type text/html;
        content_by_lua_file $base_dir/lua/list.lua;
    }  
    
    location /ulist {
    	default_type text/html;
        content_by_lua_file $base_dir/lua/ulist.lua;
    }
    
    location /d {
    	default_type text/html;
        content_by_lua_file $base_dir/lua/details.lua;
    } 
    
    location /test {
    	default_type text/html;
    	content_by_lua_file $base_dir/lua/test.lua;
    }
}

