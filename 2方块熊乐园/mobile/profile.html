<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title id="profileTitle"></title>
    <meta name="keywords" content="kalichi,mall, kalichimall,vehicle,sedan,suv,digtal,cellphone,computer,watch,bulding,family,house,office,life goods,clothes,shoes,furniture,sell,buy,second,free">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <meta http-equiv="x-dns-prefetch-control" content="on" />
    <meta name="format-detection"content="telephone=no"/>
    <meta name="format-detection" content="email=no"/>
    <link class="favicon" href="" rel="shortcut icon" type="image/x-icon"/>
    <link rel="stylesheet" href="css/bootstraptc.min.css">
    <link rel="stylesheet" href="css/ppublic.min.css">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/profile.css">
</head>
<body>
<section class="commonPopBox1" style="display: none;">
    <div class="commonPop">
        <h3 class="title"></h3>
        <p class="detailTip"></p>
        <div class="confirmBox">
            <span class="confirmBtn">OK</span>
        </div>
    </div>
</section>
<section class="commonPopBox2" style="display: none;">
    <div class="commonPop">
        <h3 class="title"></h3>
        <p class="detailTip"></p>
        <div class="confirmBox">
            <span class="confirmBtn confirmBtn1"></span>&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="confirmBtn confirmBtn2"></span>
        </div>
    </div>
</section>
<section class="container">
    <aside class="row headerBox">
        <div class="col-xs-4 col-sm-4 left"><img class="logo" src="image/index/logo.png"></div>
        <div class="col-xs-4 col-sm-4 profileMiddle">My Home</div>
        <div class="col-xs-4 col-sm-4 right">
            <img class="search" src="image/index/search.png">
            <span class="logout" style="display: none;">Logout</span>
        </div>
    </aside>


    <aside class="searchBox row">
        <div class="row search col-xs-12 col-sm-12">
            <div class="col-xs-12 col-sm-12 searchLeft">
                <div class="col-xs-3 col-sm-3 part1">
                    <div class="col-xs-12 col-sm-12 headImg"><img src="" style="display: none;"></div>
                    <div class="col-xs-12 col-sm-12 name"></div>
                </div>

                <div class="col-xs-3 col-sm-3 part2">
                    <a href="#sellingSign" style="display: block; width: 100%;height: 90px;">
                        <div class="col-xs-12 col-sm-12" style="height:50px;"><span class="number" id="sellingNum"></span></div>
                        <div class="col-xs-12 col-sm-12"><span class="sort">SELLING</span></div>
                    </a>
                </div>
                <div class="col-xs-3 col-sm-3 part2 leftSize">
                    <a href="#likeSign" style="display: block; width: 100%;height: 90px;">
                        <div class="col-xs-12 col-sm-12" style="height:50px;"><span class="number" id="likeNum"></span></div>
                        <div class="col-xs-12 col-sm-12"><span class="sort">MY WISH</span></div>
                    </a>
                </div>
                <div class="col-xs-3 col-sm-3 part2 leftSize">
                    <!--<a href="#messageSign" style="display: block; width: 100%;height: 90px;">
                        <div class="col-xs-12 col-sm-12" style="height:50px;"><span class="number" id="messageNum"></span></div>
                        <div class="col-xs-12 col-sm-12"><span class="sort">MESSAGE</span></div>
                    </a>-->
                </div>
            </div>
        </div>
    </aside>

    <aside class="publishBox">
        <div class="row publish">
            <!--<div class="col-xs-12 col-sm-12">
                <textarea name="name" class="publishText"></textarea>
            </div>-->
            <div class="col-xs-12 col-sm-12 publishBtnBox" style="display: none;">
                <a href="#" class="publishBtn">PUBLISH</a>
            </div>
        </div>
    </aside>

    <aside class="sellingBox">
        <div class="row selling">
            <div class="col-xs-12 col-sm-12 sellingTitle">
                <a class="gang"  name="sellingSign">|</a>&nbsp;<span class="" id="sellingTitle">SELLING(<span class="sellingNum"></span>)</span>
            </div>
            <div class="col-xs-12 col-sm-12 sellingList">
                <!--<a href="#" class="sellingLink">
                    <img class="goodImg" src="image/information/sellingImg.jpg">
                    <div class="row desc">
                        <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                        <div class="col-xs-6 col-sm-6 right">1054</div>
                    </div>
                </a>-->
            </div>
            <div class="col-xs-12 col-sm-12 more" id="moreSelling" style="display: none;">
                <a href="#"  class="moreText">MORE</a>
            </div>
        </div>
    </aside>

    <aside class="likeBox">
        <div class="row like">
            <div class="col-xs-12 col-sm-12 likeTitle">
                <a class="gang" name="likeSign">|</a>&nbsp;<span class="" id="likeTitle">MY WISH(<span class="likeNum"></span>)</span>
            </div>
            <div class="col-xs-12 col-sm-12 likeList">
                <a href="#" class="likeLink col-xs-3 col-sm-3">
                    <img class="goodImg" src="image/information/sellingImg.jpg">
                    <div class="row desc">
                        <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                        <div class="col-xs-6 col-sm-6 right">1054</div>
                    </div>
                </a><a href="#" class="likeLink col-xs-3 col-sm-3">
                    <img class="goodImg" src="image/information/sellingImg.jpg">
                    <div class="row desc">
                        <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                        <div class="col-xs-6 col-sm-6 right">1054</div>
                    </div>
                </a><a href="#" class="likeLink col-xs-3 col-sm-3">
                    <img class="goodImg" src="image/information/sellingImg.jpg">
                    <div class="row desc">
                        <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                        <div class="col-xs-6 col-sm-6 right">1054</div>
                    </div>
                </a><a href="#" class="likeLink col-xs-3 col-sm-3">
                    <img class="goodImg" src="image/information/sellingImg.jpg">
                    <div class="row desc">
                        <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                        <div class="col-xs-6 col-sm-6 right">1054</div>
                    </div>
                </a><a href="#" class="likeLink col-xs-3 col-sm-3">
                    <img class="goodImg" src="image/information/sellingImg.jpg">
                    <div class="row desc">
                        <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                        <div class="col-xs-6 col-sm-6 right">1054</div>
                    </div>
                </a><a href="#" class="likeLink col-xs-3 col-sm-3">
                    <img class="goodImg" src="image/information/sellingImg.jpg">
                    <div class="row desc">
                        <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                        <div class="col-xs-6 col-sm-6 right">1054</div>
                    </div>
                </a><a href="#" class="likeLink col-xs-3 col-sm-3">
                    <img class="goodImg" src="image/information/sellingImg.jpg">
                    <div class="row desc">
                        <div class="col-xs-6 col-sm-6 left">iPhone 5s</div>
                        <div class="col-xs-6 col-sm-6 right">1054</div>
                    </div>
                </a>
            </div>
            <div class="col-xs-12 col-sm-12 more" id="moreLike" style="display: none;">
                <a href="#"  class="moreText">MORE</a>
            </div>
        </div>
    </aside>

    <aside class="messageBox">
        <div class="row message"><!--messageSign-->
            <div class="col-xs-12 col-sm-12 messageTitle">
                <a class="gang" name="messageSign">|</a>&nbsp;<span class="">MESSAGES<!--(<span class="messageNum"></span>)--></span>
            </div>

            <!--facebook发布评论-->
            <!--<div class="fb-comments row" id="fackbookNeedId" data-href="http://www.kalichimall.com:81/detail.html?id=254"></div>-->
            <div class="fb-comments row" id="fackbookNeedId"></div>
            <div id="fb-root"></div>
            <script>(function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id

                        = id;
                js.src = "//connect.facebook.net/en/sdk.js#xfbml=1&version=v2.8&appId=612348248960723";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));</script>

        </div>
    </aside>


    <aside class="row infos">
        <div class="col-xs-6 col-sm-6 part publish"><span>Publish</span></div>
        <div class="col-xs-6 col-sm-6 part signInUp" style="display: block;"><span>Sign in/Sign up</span></div>
        <div class="col-xs-6 col-sm-6 part profile" style="display: none;"><span>My Profile</span></div>
    </aside>

</section>
<script type="text/javascript" src="js/jquery-3.0.0.min.js"></script>
<script type="text/javascript" src="js/swiper.min.js"></script>
<script type="text/javascript" src="js/public.js"></script>
<script type="text/javascript">
    $(function(){

        //点击发布
        $('.infos .publish').unbind('click').click(function () {
            window.location.href = "publish.html";
        });
        //注册/登陆
        $('.infos .signInUp').unbind('click').click(function () {
            window.location.href = "login.html";
        });
        //My Profile
        $('.infos .profile').unbind('click').click(function () {
            window.location.href = "profile.html";
        });

        /*facebook发布评论*/
        $('#fackbookNeedId').attr('data-href', "http://www.kalichimall.com:81/profile.html"+window.location.search);


        //
        var pubUid = getParamByUrl('pubUid');

        //获得商品发布者用户信息
        $.ajax({
            type: "get",
            url: baseUrl+"/apigateway/getuserinfo_pub?uid="+pubUid+"&token="+token,
            dataType:"json",
            success: function(data){
                console.log(baseUrl+"/apigateway/getuserinfo_pub?uid="+pubUid+"&token="+token);
                console.log('发布者用户信息', data);
                data = data.data;

                //修改title
                $('#profileTitle').html(data.nickname + "'s home. kalichimall, make money by your second-hand goods.");

                //详情页信息
                $('.searchBox .search .searchLeft .part1 .headImg img').show().attr('src',baseImgSrc+data.logo).click(function(){
//                    alert("跳转");
//                    window.location.href = 'manage.html?pubUid='+pubUid;
                    window.location.href = 'manage.html';
                });
                $('.searchBox .search .searchLeft .part1 .name').html(data.nickname);
            },
            error:function(error){
                console.log(error);
            }
        });

        //获得发布者的售卖信息
        $.ajax({
            type: "get",
            url: baseUrl+"/apigateway/getselling_ext?uid="+pubUid+'&start=0&n=',
            dataType:"json",
            success: function(data){
                if(data.status == 200){
                    data = JSON.parse(data.data);
                    console.log("售卖信息",data);
                    $('#sellingNum').html(data.length);
                    $('#sellingTitle .sellingNum').html(data.length);
                    if(data.length>4){
                        $('#moreSelling').show();
                        $('.sellingBox .selling .sellingList').addClass('sellingHeight');
                    }
                    for(var i=0; i<data.length; i++){
                        var priceStr = '';
                        if(data[i].price == 0){
                            priceStr = 'Negotiated';
                        }else{
                            priceStr = data[i].price;
                        }
                        $('.sellingBox .selling .sellingList').append(
                                '<a href="#" class="col-xs-3 col-sm-3 sellingLink">' +
                                '<img class="goodImg" src='+baseImgSrc+data[i].cimg+'>' +
                                '<div class="row desc">' +
                                '<div class="col-xs-6 col-sm-6 left">'+data[i].title+'</div>' +
                                '<div class="col-xs-6 col-sm-6 right">'+priceStr+'</div>' +
                                '</div>' +
                                '</a>');
                        $('.sellingBox .selling .sellingList .sellingLink .goodImg').hover(
                                function(){
                                    $(this).siblings('.desc').fadeIn();
                                },
                                function(){
                                    $(this).siblings('.desc').fadeOut();
                                }
                        );
                        //点击某个跳转
                        $('.sellingBox .selling .sellingList .sellingLink').unbind('click').click(function(){
                            var index = $(this).index();
                            window.open("detail.html?id="+data[index].id);
//                            window.location.href = "detail.html?id="+data[index].id;
                        });
                        $('#moreSelling').unbind('click').click(function(){
                            $('.sellingBox .selling .sellingList').removeClass('sellingHeight');
                            $(this).hide();

                        });
                    }

                }else{
                    commonPopFun1(data.msg, 'Failed');
                }
            },
            error:function(error){
                console.log(error);
            }
        });

        //获得当前用户收藏信息
        $.ajax({
            type: "get",
            url: baseUrl+"/apigateway/getwish_ext?uid="+pubUid+'&action=user&start=0&n=',
            dataType:"json",
            success: function(data){
                if(data.status == 200){
                    data = JSON.parse(data.data);
                    console.log("收藏信息",data);
                    $('#likeNum').html(data.length);
                    $('#likeTitle .likeNum').html(data.length);
                    if(data.length>4){
                        $('#moreLike').show();
                        $('.likeBox .like .likeList').addClass('likeHeight');
                    }

                    for(var i=0; i<data.length; i++){
                        var priceStr = '';
                        if(data[i].price == 0){
                            priceStr = 'Negotiated';
                        }else{
                            priceStr = data[i].price;
                        }
                        $('.likeBox .like .likeList').append(
                                '<a href="#" class="likeLink col-xs-3 col-sm-3">' +
                                '<img class="goodImg" src='+baseImgSrc+data[i].cimg+'>' +
                                '<div class="row desc">' +
                                '<div class="col-xs-6 col-sm-6 left">'+data[i].title+'</div>' +
                                '<div class="col-xs-6 col-sm-6 right">'+priceStr+'</div>' +
                                '</div>' +
                                '</a>');
                        $('.likeBox .like .likeList .likeLink .goodImg').hover(
                                function(){
                                    $(this).siblings('.desc').fadeIn();
                                },
                                function(){
                                    $(this).siblings('.desc').fadeOut();
                                }
                        );
                        //点击某个跳转
                        $('.likeBox .like .likeList .likeLink').unbind('click').click(function(){
                            var index = $(this).index();
//                            alert(data[index].id);
                            window.open("detail.html?id="+data[index].id);
//                            window.location.href = "detail.html?id="+data[index].id;
                        });
                        $('#moreLike').unbind('click').click(function(){
                            $('.likeBox .like .likeList').removeClass('likeHeight');
                            $(this).hide();
                        });
                    }

                }else{
                    commonPopFun1(data.msg, 'Failed');
                }
            },
            error:function(error){
                console.log(error);
            }
        });


    });
</script>
</body>
</html>